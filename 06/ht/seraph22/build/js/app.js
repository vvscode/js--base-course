!function e(t,n,a){function s(i,o){if(!n[i]){if(!t[i]){var h="function"==typeof require&&require;if(!o&&h)return h(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return s(n||e)},c,c.exports,e,t,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)s(a[i]);return s}({1:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var s=a(e("./components/arena")),r=a(e("./components/controls")),i=a(e("./components/replayGame")),o=a(e("./routes/index")),h=a(e("./routes/play")),u=a(e("./routes/replay")),c=a(e("./routes/results")),l=a(e("./utils/router")),m=a(e("./utils/eventBus")),d=a(e("./utils/game")),p=new m.default,f=new o.default(p),y=new s.default,v=new i.default(y),b=(new r.default(p),new d.default(y,p)),w=new h.default(b),g=new c.default(b),E=[f,w,new u.default(v,p),g];new l.default(E,p)},{"./components/arena":2,"./components/controls":3,"./components/replayGame":5,"./routes/index":7,"./routes/play":8,"./routes/replay":9,"./routes/results":10,"./utils/eventBus":11,"./utils/game":12,"./utils/router":13}],2:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.canvas=document.createElement("canvas"),this.canvas.width=798,this.canvas.height=598,this.context=this.canvas.getContext("2d"),this.container=document.querySelector(".container"),this.container.appendChild(this.canvas)}return s(e,[{key:"startArena",value:function(){this.dumbEnemy=[],this.dumbEnemyCount=1,this.dumbEnemySpriteNum=1,this.smartEnemy=[],this.smartEnemyCount=1,this.smartEnemySpriteNum=1,this.backgroundCount=1}},{key:"clearArena",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"setNewGround",value:function(){9===this.backgroundCount&&(this.backgroundCount=1),this.canvas.style.backgroundImage="url(./img/background/ground0"+this.backgroundCount+".jpg)",this.backgroundCount++}}]),e}();n.default=r},{}],3:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],a=!0,s=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(t){a(this,e),this.eventBus=t,this.eventBus.on("controls",this.run.bind(this))}return r(e,[{key:"run",value:function(e){var t=s(e,2),n=t[0],a=t[1];n.player.speedX=0,n.player.speedY=0,37===a.keyCode&&(n.player.speedX=-3.5),39===a.keyCode&&(n.player.speedX=3.5),38===a.keyCode&&(n.player.speedY=-3.5),40===a.keyCode&&(n.player.speedY=3.5)}}]),e}();n.default=i},{}],4:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n,s,r,i,o,h,u,c,l){a(this,e),this.spriteSize=t,this.startPosX=n,this.startPosY=s,this.radius=r,this.speedX=i,this.speedY=o,this.arena=u,this.type=c,this.frame=l||0,this.step=0,this.image=new Image,this.image.src=h}return s(e,[{key:"draw",value:function(e){this.step+=1,this.step=this.step%30;var t=0;this.speedX<=0&&this.speedY<=0&&(t=Math.abs(this.speedX)<Math.abs(this.speedY)?3:1),this.speedX<=0&&this.speedY>=0&&(t=Math.abs(this.speedX)<Math.abs(this.speedY)?0:1),this.speedX>=0&&this.speedY<=0&&(t=Math.abs(this.speedX)<Math.abs(this.speedY)?3:2),this.speedX>=0&&this.speedY>=0&&(t=Math.abs(this.speedX)<Math.abs(this.speedY)?0:2),0===this.speedX&&0===this.speedY&&(t=0),e.drawImage(this.image,this.image.width/this.spriteSize[0]*Math.floor(this.step/10),this.image.height/this.spriteSize[1]*t,this.image.width/this.spriteSize[0],this.image.height/this.spriteSize[1],this.startPosX-this.radius,this.startPosY-this.radius,2.1*this.radius,2.1*this.radius)}},{key:"updatePos",value:function(){this.startPosX+=this.speedX,this.startPosY+=this.speedY,this.startPosX>this.arena.canvas.width&&("player"===this.type?this.startPosX=0:this.speedX=-this.speedX),this.startPosX<0&&("player"===this.type?this.startPosX=this.arena.canvas.width:this.speedX=-this.speedX),this.startPosY>this.arena.canvas.height&&("player"===this.type?this.startPosY=0:this.speedY=-this.speedY),this.startPosY<0&&("player"===this.type?this.startPosY=this.arena.canvas.height:this.speedY=-this.speedY)}},{key:"drawReplay",value:function(e,t,n,a,s){this.startPosX=t,this.startPosY=n,this.speedX=a,this.speedY=s,this.step+=1,this.step=this.step%30;var r=0;this.speedX<=0&&this.speedY<=0&&(r=Math.abs(this.speedX)<Math.abs(this.speedY)?3:1),this.speedX<=0&&this.speedY>=0&&(r=Math.abs(this.speedX)<Math.abs(this.speedY)?0:1),this.speedX>=0&&this.speedY<=0&&(r=Math.abs(this.speedX)<Math.abs(this.speedY)?3:2),this.speedX>=0&&this.speedY>=0&&(r=Math.abs(this.speedX)<Math.abs(this.speedY)?0:2),0===this.speedX&&0===this.speedY&&(r=0),e.drawImage(this.image,this.image.width/this.spriteSize[0]*Math.floor(this.step/10),this.image.height/this.spriteSize[1]*r,this.image.width/this.spriteSize[0],this.image.height/this.spriteSize[1],this.startPosX-this.radius,this.startPosY-this.radius,2.1*this.radius,2.1*this.radius)}},{key:"checkIntersection",value:function(e){var t=e.startPosX-this.startPosX,n=e.startPosY-this.startPosY;return Math.sqrt(t*t+n*n)<this.radius+e.radius}},{key:"catchUp",value:function(e){var t=e.startPosX-this.startPosX,n=e.startPosY-this.startPosY,a=Math.sqrt(t*t+n*n),s=Math.atan2(n,t),r=Math.sqrt(this.speedX*this.speedX+this.speedY*this.speedY);a<3*(this.radius+e.radius)&&(this.speedX=r*Math.cos(s),this.speedY=r*Math.sin(s))}}]),e}();n.default=r},{}],5:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(e("./person")),o=a(e("./score")),h=function(){function e(t){s(this,e),this.arena=t,this.replaySpeed=10}return r(e,[{key:"bestReplay",value:function(){this.frame=0,this.saveGame=JSON.parse(localStorage.getItem("saveGame"))||{},Object.keys(this.saveGame).length>0&&(this.player=new i.default([4,4],this.saveGame.player.posX[this.frame],this.saveGame.player.posY[this.frame],25,0,0,"img/knightrider.png",this.arena,"player"),this.level=new o.default(20,30,"#7bff60"),this.score=new o.default(20,52,"#fff12d"),this.scoreCount=0,this.arena.startArena(),this.interval=setInterval(this.updateGame.bind(this),this.replaySpeed))}},{key:"updateGame",value:function(){if(this.frame>=Object.keys(this.saveGame.player.posX).length)this.stopReplay(),setTimeout(function(){window.location.hash="results"},1500);else{this.arena.clearArena(),this.scoreCount+=1,1!==this.scoreCount&&this.scoreCount%600!=0||this.arena.setNewGround(),1!==this.scoreCount&&this.scoreCount%300!=0||(9===this.arena.dumbEnemySpriteNum&&(this.arena.dumbEnemySpriteNum=1),this.arena.dumbEnemy.push(new i.default([3,4],this.saveGame["dumbEnemy_"+this.arena.dumbEnemyCount].posX[this.frame],this.saveGame["dumbEnemy_"+this.arena.dumbEnemyCount].posY[this.frame],22,this.saveGame["dumbEnemy_"+this.arena.dumbEnemyCount].speedX[this.frame],this.saveGame["dumbEnemy_"+this.arena.dumbEnemyCount].speedY[this.frame],"img/dumbEnemy/wolf"+this.arena.dumbEnemySpriteNum+".png",this.arena,"dumbEnemy_"+this.arena.dumbEnemyCount,this.frame)),this.arena.dumbEnemyCount++,this.arena.dumbEnemySpriteNum++),this.scoreCount%600==0&&(9===this.arena.smartEnemySpriteNum&&(this.arena.smartEnemySpriteNum=1),this.arena.smartEnemy.push(new i.default([3,4],this.saveGame["smartEnemy_"+this.arena.smartEnemyCount].posX[this.frame],this.saveGame["smartEnemy_"+this.arena.smartEnemyCount].posY[this.frame],22,this.saveGame["smartEnemy_"+this.arena.smartEnemyCount].speedX[this.frame],this.saveGame["smartEnemy_"+this.arena.smartEnemyCount].speedY[this.frame],"img/smartEnemy/bearcat"+this.arena.smartEnemySpriteNum+".png",this.arena,"smartEnemy_"+this.arena.smartEnemyCount,this.frame)),this.arena.smartEnemyCount++,this.arena.smartEnemySpriteNum++),this.player.drawReplay(this.arena.context,this.saveGame[this.player.type].posX[this.frame],this.saveGame[this.player.type].posY[this.frame],this.saveGame[this.player.type].speedX[this.frame],this.saveGame[this.player.type].speedY[this.frame]);for(var e=0;e<this.arena.dumbEnemy.length;e++)this.arena.dumbEnemy[e].drawReplay(this.arena.context,this.saveGame[this.arena.dumbEnemy[e].type].posX[this.frame-this.arena.dumbEnemy[e].frame],this.saveGame[this.arena.dumbEnemy[e].type].posY[this.frame-this.arena.dumbEnemy[e].frame],this.saveGame[this.arena.dumbEnemy[e].type].speedX[this.frame-this.arena.dumbEnemy[e].frame],this.saveGame[this.arena.dumbEnemy[e].type].speedY[this.frame-this.arena.dumbEnemy[e].frame]);for(var t=0;t<this.arena.smartEnemy.length;t++)this.arena.smartEnemy[t].drawReplay(this.arena.context,this.saveGame[this.arena.smartEnemy[t].type].posX[this.frame-this.arena.smartEnemy[t].frame],this.saveGame[this.arena.smartEnemy[t].type].posY[this.frame-this.arena.smartEnemy[t].frame],this.saveGame[this.arena.smartEnemy[t].type].speedX[this.frame-this.arena.smartEnemy[t].frame],this.saveGame[this.arena.smartEnemy[t].type].speedY[this.frame-this.arena.smartEnemy[t].frame]);this.scoreCount%600==0&&this.level.index++,this.level.text="LEVEL    "+this.level.index,this.level.draw(this.arena.context),this.score.text="SCORE   "+this.currentScore,this.score.draw(this.arena.context),this.currentScore=+(Math.round(this.scoreCount/25)+"0"),this.frame++}}},{key:"stopReplay",value:function(){clearInterval(this.interval)}}]),e}();n.default=h},{"./person":4,"./score":6}],6:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n,s){a(this,e),this.posX=t,this.posY=n,this.color=s,this.index=1}return s(e,[{key:"draw",value:function(e){e.font="bold 20px Calibri",e.fillStyle=this.color,e.fillText(this.text,this.posX,this.posY)}}]),e}();n.default=r},{}],7:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){a(this,e),this.eventBus=t,this.name="index",this.match="",this.container=document.querySelector(".container"),this.container.innerHTML='\n\t\t\t<div class="main">\n                <div class="description">\n                \t<h1>The Revenant 1.0.1</h1>\n                    <p>Once upon a time there were two friends and one enemy. That enemy was the mean scary dragon. That terrorised all the land’s people. One of the friends was the kind and pretty princess. Everyone liked her. Her name was Sapphire. She was very loving and caring. The other friend was the brave and skilful knight. He was always there for princess Sapphire. The enemy was the mean scary dragon. His name was Flame. He was very fierce. The knight’s name was Arthur. When Sapphire was just about to get some pretty flowers for Arthur, the big scary dragon Flame stood right in front of scared Princess Sapphire, and took her as a prisoner. Arthur heard that news and ran as fast as he could, carrying his sword in one hand. Eventually, he came to the dark where Arthur met a wise and very old oak tree. The old oak tree was ten million thousand years old; he could tell you anything that you want to know. Arthur asked the very old oak tree where he could find Princess Sapphire. The old oak tree said, ‘I believe that she was taken prisoner by the evil dragon Flame. You will find her in a very very cold and damp and dark cave that has his greatest treasures in it, including the ones that he stole.’ Arthur said, ‘Thank you very much’, and he set off to find Princess Sapphire...</p>\n                </div>\n            </div>\n            \n            <div class="play-button" id="play">Start jorney</div>\n            <div class="warning-player-name hidden">You should enter player name first</div>\n            <input class="player-name" type="text" placeholder="Enter player name..." autofocus>\n\t\t',this.main=document.querySelector(".main"),this.playButton=document.querySelector(".play-button"),this.warning=document.querySelector(".warning-player-name"),this.inputPlayerName=document.querySelector(".player-name")}return s(e,[{key:"onEnter",value:function(){var e=this;this.playButton.addEventListener("click",function(){e.inputPlayerName.value?(e.eventBus.trigger("playerName",e.inputPlayerName.value),window.location.hash="play"):e.warning.classList.remove("hidden")})}},{key:"onLeave",value:function(){this.container.removeChild(this.main),this.container.removeChild(this.playButton),this.container.removeChild(this.warning),this.container.removeChild(this.inputPlayerName)}}]),e}();n.default=r},{}],8:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){a(this,e),this.name="play",this.match="play",this.game=t}return s(e,[{key:"onEnter",value:function(){this.game.playerName?this.game.startGame():window.location.hash=""}}]),e}();n.default=r},{}],9:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n){a(this,e),this.name="replay",this.match="replay",this.replayGame=t,this.eventBus=n}return s(e,[{key:"onEnter",value:function(){this.replayGame.bestReplay()}}]),e}();n.default=r},{}],10:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){a(this,e),this.name="results",this.match="results",this.game=t,this.container=document.querySelector(".container"),this.canvas=document.querySelector("canvas")}return s(e,[{key:"onBeforeEnter",value:function(){this.game.playerName||(window.location.hash="")}},{key:"onEnter",value:function(){this.scoreObj=JSON.parse(localStorage.getItem("score"))||{};var e=document.createElement("div");if(e.className="results-container",e.innerHTML='\n            <div class="results">\n                <h1>The Revenant 1.0.1</h1>\n                <h2>Best players:</h2>\n            </div>\n\n\t\t\t<div class="play-again-button" id="play">Play again</div>\n\t\t\t<div class="replay-button" id="replay">Replay best game</div>\n\t\t',this.container.insertBefore(e,this.canvas),this.resultsContainer=document.querySelector(".results-container"),this.playButton=document.querySelector(".play-again-button"),this.playButton.addEventListener("click",function(){return window.location.hash="play"}),this.replayButton=document.querySelector(".replay-button"),this.replayButton.addEventListener("click",function(){return window.location.hash="replay"}),this.results=document.querySelector(".results"),Object.keys(this.scoreObj).length>0)for(var t in this.scoreObj){var n=t,a=void 0,s=void 0;n.indexOf("#")>=0&&(a=(s=n.split("#"))[0],n=s[1]);var r=document.createElement("p");r.innerHTML=a+". "+n+" : "+this.scoreObj[t],this.results.appendChild(r)}}},{key:"onLeave",value:function(){this.container.removeChild(this.resultsContainer)}}]),e}();n.default=r},{}],11:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this.listeners={}}return s(e,[{key:"on",value:function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)}},{key:"off",value:function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e]=this.listeners[e].filter(function(e){return e!==t})}},{key:"once",value:function(e,t){var n=this;this.on(e,function a(s){t(s),n.off(e,a)})}},{key:"trigger",value:function(e,t){(this.listeners[e]||[]).forEach(function(e){return e(t)})}}]),e}();n.default=r},{}],12:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(e("../components/person")),o=a(e("../components/score")),h=function(){function e(t,n){var a=this;s(this,e),this.arena=t,this.eventBus=n,this.player={},this.scoreObj=JSON.parse(localStorage.getItem("score"))||{},this.eventBus.on("playerName",function(e){a.playerName=e})}return r(e,[{key:"startGame",value:function(){var e=this;this.player=new i.default([4,4],400,300,25,0,0,"img/knightrider.png",this.arena,"player"),this.level=new o.default(20,30,"#7bff60"),this.score=new o.default(20,52,"#fff12d"),window.addEventListener("keydown",function(t){t.preventDefault(),e.eventBus.trigger("controls",[e,t])}),this.saveGame={},this.scoreCount=0,this.arena.startArena(),this.interval=setInterval(this.updateGame.bind(this),20)}},{key:"updateGame",value:function(){this.checkGameOver(this.arena.dumbEnemy),this.checkGameOver(this.arena.smartEnemy),this.arena.clearArena(),this.scoreCount+=1,1!==this.scoreCount&&this.scoreCount%600!=0||this.arena.setNewGround(),1!==this.scoreCount&&this.scoreCount%300!=0||(9===this.arena.dumbEnemySpriteNum&&(this.arena.dumbEnemySpriteNum=1),this.arena.dumbEnemy.push(new i.default([3,4],this.randomNumCanvas(this.arena.canvas.width),this.randomNumCanvas(this.arena.canvas.height),22,this.randomNumber(),this.randomNumber(),"img/dumbEnemy/wolf"+this.arena.dumbEnemySpriteNum+".png",this.arena,"dumbEnemy_"+this.arena.dumbEnemyCount)),this.arena.dumbEnemyCount++,this.arena.dumbEnemySpriteNum++),this.scoreCount%600==0&&(9===this.arena.smartEnemySpriteNum&&(this.arena.smartEnemySpriteNum=1),this.arena.smartEnemy.push(new i.default([3,4],this.randomNumCanvas(this.arena.canvas.width),this.randomNumCanvas(this.arena.canvas.height),22,this.randomNumber(),this.randomNumber(),"img/smartEnemy/bearcat"+this.arena.smartEnemySpriteNum+".png",this.arena,"smartEnemy_"+this.arena.smartEnemyCount)),this.arena.smartEnemyCount++,this.arena.smartEnemySpriteNum++),this.player.updatePos(),this.saveCurrentPos(this.player),this.player.draw(this.arena.context);for(var e=0;e<this.arena.dumbEnemy.length;e++)this.arena.dumbEnemy[e].updatePos(),this.saveCurrentPos(this.arena.dumbEnemy[e]),this.arena.dumbEnemy[e].draw(this.arena.context);for(var t=0;t<this.arena.smartEnemy.length;t++)this.arena.smartEnemy[t].catchUp(this.player),this.arena.smartEnemy[t].updatePos(),this.saveCurrentPos(this.arena.smartEnemy[t]),this.arena.smartEnemy[t].draw(this.arena.context);this.scoreCount%600==0&&this.level.index++,this.level.text="LEVEL    "+this.level.index,this.level.draw(this.arena.context),this.score.text="SCORE   "+this.currentScore,this.score.draw(this.arena.context),this.currentScore=+(Math.round(this.scoreCount/25)+"0")}},{key:"checkGameOver",value:function(e){for(var t=0;t<e.length;t++)if(this.player.checkIntersection(e[t]))return this.stopGame(),this.saveScore(),void(window.location.hash="results")}},{key:"stopGame",value:function(){clearInterval(this.interval)}},{key:"saveScore",value:function(){var e={};if(Object.keys(this.scoreObj).length>0){var t=!0,n=0;for(var a in this.scoreObj){var s=a.split("#"),r=+s[0],i=s[1];t&&this.currentScore>this.scoreObj[a]?(1===r&&localStorage.setItem("saveGame",JSON.stringify(this.saveGame)),n=1,e[r+"#"+this.playerName]=this.currentScore,e[n+r+"#"+i]=this.scoreObj[a],t=!1):e[n+r+"#"+i]=this.scoreObj[a]}this.scoreObj=Object.assign(e,{}),Object.keys(this.scoreObj).length>10&&delete this.scoreObj[Object.keys(this.scoreObj)[10]]}else this.scoreObj["1#"+this.playerName]=this.currentScore,localStorage.setItem("saveGame",JSON.stringify(this.saveGame));localStorage.setItem("score",JSON.stringify(this.scoreObj))}},{key:"saveCurrentPos",value:function(e){if(this.saveGame[e.type]){var t=this.saveGame[e.type].posX;t.push(e.startPosX),this.saveGame[e.type].posX=t;var n=this.saveGame[e.type].posY;n.push(e.startPosY),this.saveGame[e.type].posY=n;var a=this.saveGame[e.type].speedX;a.push(e.speedX),this.saveGame[e.type].speedX=a;var s=this.saveGame[e.type].speedY;s.push(e.speedY),this.saveGame[e.type].speedY=s}else this.saveGame[e.type]={posX:[e.startPosX],posY:[e.startPosY],speedX:[e.speedX],speedY:[e.speedY]}}},{key:"randomNumber",value:function(){return(Math.random()<.5?-1:1)*(2.5*Math.random())}},{key:"randomNumCanvas",value:function(e){var t=Math.random();return t<=.25||t>=.75?Math.round(t*e):t>=.5?Math.round((t+.25)*e):Math.round((t-.25)*e)}}]),e}();n.default=h},{"../components/person":4,"../components/score":6}],13:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n){a(this,e),this.routes=t||[],this.eventBus=n,this.init()}return s(e,[{key:"init",value:function(){var e=this;window.addEventListener("hashchange",function(){return e.handleUrl(window.location.hash)}),this.handleUrl(window.location.hash)}},{key:"findPreviousActiveRoute",value:function(){return this.currentRoute}},{key:"findNewActiveRoute",value:function(e){var t=this.routes.find(function(t){return"string"==typeof t.match?e===t.match:"function"==typeof t.match?t.match(e):t.match instanceof RegExp?e.match(t.match):void 0});return t||(t=this.routes[0]),t}},{key:"handleUrl",value:function(e){var t=this;e=e.slice(1);var n=this.findPreviousActiveRoute(),a=this.findNewActiveRoute(e);Promise.resolve().then(function(){return n&&n.onLeave&&n.onLeave(window.location.hash,t.eventBus)}).then(function(){return a&&a.onBeforeEnter&&a.onBeforeEnter(window.location.hash,t.eventBus)}).then(function(){return a&&a.onEnter&&a.onEnter(window.location.hash,t.eventBus)}).then(function(){t.currentRoute=a})}}]),e}();n.default=r},{}]},{},[1]);